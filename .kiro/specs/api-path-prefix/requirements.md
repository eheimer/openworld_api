# Requirements Document

**GitHub Issue:** #30

## Introduction

This feature moves all REST API endpoints from the root path (`/`) to a prefixed path (`/api/`). This change enables the production server to serve both API endpoints and static HTML documents from the same domain without URI conflicts. The implementation focuses solely on the API path restructuring and does not include static HTML serving functionality.

## Glossary

- **API Endpoint**: A specific URL path that handles HTTP requests for the REST API
- **Global Prefix**: A path segment prepended to all routes in the NestJS application
- **OpenAPI Specification**: The machine-readable API documentation generated by Swagger
- **Base Path**: The root path segment under which all API routes are organized

## Requirements

### Requirement 1

**User Story:** As an API client, I want all API endpoints to be accessible under the `/api/` path, so that I can access the API at predictable URLs that won't conflict with static content.

#### Acceptance Criteria

1. WHEN the application starts THEN the system SHALL configure all routes with the `/api` global prefix
2. WHEN a client makes a request to `/api/{endpoint}` THEN the system SHALL route the request to the appropriate controller
3. WHEN a client makes a request to `/{endpoint}` (without `/api` prefix) THEN the system SHALL return a 404 Not Found response
4. WHEN the OpenAPI specification is generated THEN the system SHALL include the `/api` base path in the server configuration
5. WHEN existing endpoints are accessed with the new `/api` prefix THEN the system SHALL maintain all existing functionality including authentication, authorization, and validation

### Requirement 2

**User Story:** As a developer, I want the API documentation to reflect the new path structure, so that I can understand and test the API endpoints correctly.

#### Acceptance Criteria

1. WHEN the OpenAPI specification is accessed THEN the system SHALL display the `/api` prefix in all endpoint paths
2. WHEN the Swagger UI is accessed THEN the system SHALL show all routes under the `/api` base path
3. WHEN API documentation is generated THEN the system SHALL include server configuration with the correct base URL

### Requirement 3

**User Story:** As a system administrator, I want the path prefix change to be backward compatible during deployment, so that I can update clients without service interruption.

#### Acceptance Criteria

1. WHEN the application is deployed with the new prefix THEN the system SHALL log the global prefix configuration at startup
2. WHEN tests are executed THEN the system SHALL validate all endpoints using the `/api` prefix
3. WHEN the reverse proxy configuration is updated THEN the system SHALL continue to forward requests to the correct application port

### Requirement 4

**User Story:** As a developer, I want all test suites to use the new path structure, so that tests accurately validate the production API behavior.

#### Acceptance Criteria

1. WHEN unit tests are executed THEN the system SHALL mock requests with the `/api` prefix
2. WHEN integration tests are executed THEN the system SHALL make requests to endpoints with the `/api` prefix
3. WHEN API tests are executed THEN the system SHALL validate responses from endpoints with the `/api` prefix
4. WHEN end-to-end tests are executed THEN the system SHALL interact with the full application using the `/api` prefix
5. WHEN REST client HTTP documents are used for manual testing THEN the system SHALL include the `/api` prefix in all request URLs
