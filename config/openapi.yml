openapi: 3.0.2
info:
  title: Openworld API
  description: Openworld API
  termsOfService: http://swagger.io.terms
  contact:
    email: eric@heimerman.org
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
  version: 1.0.0
externalDocs:
  description: Find out more about Swagger
  url: http://swagger.io
servers:
  - url: /api/v1

tags:
  - name: game
    description: Game APIs
  - name: player
    description: Player APIs
  - name: battle
    description: Battle APIs
  - name: creature
    description: Creature APIs
  - name: lists
    description: Game APIs
  - name: character
    description: Character APIs
  - name: item
    description: Item APIs
  - name: deprecated
    description: Only use for testing
  - name: testing
    description: Urls for testing api and sockets

paths:
  /client:
    get:
      summary: Download client files
      description: Static files
      servers:
        - url: /
      security: []
      tags:
        - static
      operationId: clientFiles
      responses:
        200:
          description: Success
          content:
            text/html:
              schema:
                type: string
        404:
          description: Not found
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /:
    get:
      summary: Socket testing
      description: Socket entrypoint for testing sockets in a browser
      servers:
        - url: /
      security: []
      tags:
        - testing
      operationId: socketTest
      responses:
        200:
          description: Success
          content:
            text/html:
              schema:
                type: string
        404:
          description: Not found
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /players:
    post:
      security: []
      summary: register new player
      operationId: register
      tags:
        - player
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        201:
          description: Success
          headers:
            Location:
              description: the uri to retrieve the player
              schema:
                type: string
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /players/{playerId}:
    get:
      summary: retrieve a player
      description: returns more details if the requester is the player being requested
      tags:
        - player
      operationId: getPlayer
      parameters:
        - name: playerId
          required: true
          in: path
          description: The player id to retrieve
          schema:
            type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Player'
                  - $ref: '#/components/schemas/PlayerDetail'
        404:
          description: Player not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /players/{playerId}/games:
    get:
      summary: get player's /games
      description: returns the games a player has access to
      tags:
        - player
        - game
      operationId: getGames
      parameters:
        - name: playerId
          required: true
          in: path
          description: The player id
          schema:
            type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/GameCharacter'
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /games:
    post:
      summary: create a new game
      tags:
        - game
      operationId: createGame
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GameRequest'
      responses:
        201:
          description: Success
          headers:
            Location:
              description: the uri to retrieve the game
              schema:
                type: string
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /login:
    post:
      security: []
      summary: login
      description: login the player to the specified game, initiate a socket if successful
      tags:
        - player
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        404:
          description: Invalid Login/Password
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /games/{gameId}:
    parameters:
      - name: gameId
        required: true
        in: path
        description: The gameId to delete
        schema:
          type: string
    get:
      summary: retrieve game
      operationId: getGame
      tags:
        - game
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Game'
        404:
          description: Player not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
    patch:
      summary: update game partial
      operationId: updateGame
      tags:
        - game
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GameRequest'
      responses:
        204:
          description: Success
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
    delete:
      summary: remove a game
      description: deletes the game, all battles, characters, creatureInstances, inventories, etc
      tags:
        - game
      operationId: deleteGame
      responses:
        204:
          description: Success
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /games/{gameId}/players/{playerId}:
    parameters:
      - name: gameId
        required: true
        in: path
        description: the gameId
        schema:
          type: string
      - name: playerId
        required: true
        in: path
        description: the playerId
        schema:
          type: string
    post:
      summary: add a player to a game
      description: player id must exist at /players/{playerId}
      tags:
        - game
        - player
      operationId: joinGame
      responses:
        204:
          description: Success
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
    delete:
      summary: remove a player from a game
      description: player id must exist at /players/{playerId}
      tags:
        - game
        - player
      operationId: leaveGame
      responses:
        204:
          description: Success
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /games/{gameId}/players:
    parameters:
      - name: gameId
        required: true
        in: path
        description: the gameId to invite a player to
        schema:
          type: string
    post:
      summary: invite a player to a game
      tags:
        - game
      operationId: invitePlayer
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              additionalProperties: false
              required:
                - email
              properties:
                email:
                  type: string
                  format: email
      responses:
        201:
          description: Success
          headers:
            Location:
              description: the uri to retrieve the game
              schema:
                type: string
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /games/{gameId}/battles:
    parameters:
      - name: gameId
        required: true
        in: path
        description: the gameId to add the battle to
        schema:
          type: string
    post:
      summary: create a new battle
      description: creates a new battle, adding the player's character associated with /games/{gameId} to the battle
      tags:
        - battle
      operationId: createBattle
      responses:
        201:
          description: Success
          headers:
            Location:
              description: the uri to retrieve the game
              schema:
                type: string
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
    get:
      summary: get battles
      tags:
        - battle
      operationId: getGameBattles
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  type: number
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /games/{gameId}/battles/{battleId}:
    parameters:
      - name: gameId
        required: true
        in: path
        description: the gameId of the battle to retrieve
        schema:
          type: number
      - name: battleId
        required: true
        in: path
        description: the battle to retrieve
        schema:
          type: number
    get:
      summary: retrieve a battle
      tags:
        - battle
      operationId: getBattle
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BattleResponse'
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
    delete:
      summary: delete a battle
      tags:
        - battle
      operationId: deleteBattle
      responses:
        204:
          description: Success
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /games/{gameId}/battles/{battleId}/enemies:
    post:
      summary: add enemy to battle
      description: creates a new creatureInstance from the specified monsterId and adds it to the battle as an enemy
      tags:
        - battle
      operationId: createEnemy
      parameters:
        - name: gameId
          required: true
          in: path
          description: the gameId of the battle to modify
          schema:
            type: number
        - name: battleId
          required: true
          in: path
          description: the battle to modify
          schema:
            type: number
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/MonsterRequest'
      responses:
        204:
          description: Success
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/battles/{battleId}/friendlies:
  #   post:
  #     summary: add friendly to battle
  #     description: creates a new creatureInstance from the specified monsterId and adds it to the battle as a friendly
  #     tags:
  #       - battle
  #     operationId: createFriendly
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the battle to modify
  #       schema:
  #         type: number
  #     - name: battleId
  #       required: true
  #       in: path
  #       description: the battle to modify
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/MonsterRequest'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/battles/{battleId}/pets/{creatureId}:
  #   parameters:
  #   - name: gameId
  #     required: true
  #     in: path
  #     description: the gameId of the battle to modify
  #     schema:
  #       type: number
  #   - name: battleId
  #     required: true
  #     in: path
  #     description: the battle to modify
  #     schema:
  #       type: number
  #   - name: creatureId
  #     required: true
  #     in: path
  #     description: the creatureInstanceId to add
  #     schema:
  #       type: number
  #   post:
  #     summary: add pet to battle
  #     description: adds a player's pet to the battle as a friendly
  #     tags:
  #       - battle
  #     operationId: addPet
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #   delete:
  #     summary: remove pet from battle
  #     description: removes the player's pet from the battle
  #     tags:
  #       - battle
  #     operationId: removePet
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/battles/{battleId}/nextRound:
  #   post:
  #     summary: advance battle to next round
  #     description: advances battle to the next round, generates new actions for creatures, etc
  #     tags:
  #       - battle
  #     operationId: nextRound
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the battle to modify
  #       schema:
  #         type: number
  #     - name: battleId
  #       required: true
  #       in: path
  #       description: the battle to modify
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/battles/{battleId}/dealDamage:
  #   post:
  #     summary: deal damage
  #     description:  calculates damage dealt to specified creatures/characters
  #     tags:
  #       - battle
  #     operationId: dealDamage
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the battle to modify
  #       schema:
  #         type: number
  #     - name: battleId
  #       required: true
  #       in: path
  #       description: the battle to modify
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BattleDamageRequest'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/battles/{battleId}/join:
  #   post:
  #     summary: join a battle
  #     description: adds the player's character for the game to the battle
  #     tags:
  #       - battle
  #     operationId: joinBattle
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the battle to modify
  #       schema:
  #         type: number
  #     - name: battleId
  #       required: true
  #       in: path
  #       description: the battle to modify
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/creatures/{creatureId}/conditions:
  #   post:
  #     summary: add condition to creature
  #     description: creates a new activeCondition and applies it to the creature
  #     tags:
  #       - creature
  #     operationId: creatureAddCondition
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the creature to modify
  #       schema:
  #         type: number
  #     - name: creatureId
  #       required: true
  #       in: path
  #       description: the creature to modify
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       201:
  #         description: Success
  #         headers:
  #           Location:
  #             description: the uri to retrieve the activeCondition
  #             schema:
  #               type: string
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/creatures/{creatureId}/conditions/{conditionId}:
  #   delete:
  #     summary: remove activeCondition from creature
  #     tags:
  #       - creature
  #     operationId: creatureRemoveCondition
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the creature to modify
  #       schema:
  #         type: number
  #     - name: creatureId
  #       required: true
  #       in: path
  #       description: the creature to modify
  #       schema:
  #         type: number
  #     - name: conditionId
  #       required: true
  #       in: path
  #       description: the condition to remove
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/creatures/{creatureId}/tame:
  #   post:
  #     summary: tame creature
  #     description: marks the creature as tamed, adds it to the player as a pet, moves it from the battle's enemies to friendlies
  #     tags:
  #       - creature
  #     operationId: tameCreature
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the battle of the creature to modify
  #       schema:
  #         type: number
  #     - name: creatureId
  #       required: true
  #       in: path
  #       description: the creature to modify
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/creatures/{creatureId}/release:
  #   post:
  #     summary: release tamed creature
  #     description: marks the creature as untamed, removes it from the player's pets, moves it from the battle's friendlies to enemies
  #     tags:
  #       - creature
  #     operationId: releasePet
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the battle of the creature to modify
  #       schema:
  #         type: number
  #     - name: battleId
  #       required: true
  #       in: path
  #       description: the battle of the creature to modify
  #       schema:
  #         type: number
  #     - name: creatureId
  #       required: true
  #       in: path
  #       description: the creature to modify
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/creatures/{creatureId}/resurrect:
  #   post:
  #     summary: resurrect player's pet
  #     tags:
  #       - creature
  #     operationId: resurrectPet
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the creature to modify
  #       schema:
  #         type: number
  #     - name: creatureId
  #       required: true
  #       in: path
  #       description: the creature to modify
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/creatures/{creatureId}:
  #   parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the creature to delete
  #       schema:
  #         type: number
  #     - name: creatureId
  #       required: true
  #       in: path
  #       description: the creature to delete
  #       schema:
  #         type: number
  #   patch:
  #     summary: update pet partial
  #     description: used to rename pets
  #     tags:
  #       - creature
  #     operationId: updatePet
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/PetRequest'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #   delete:
  #     summary: delete creature
  #     description: deletes creature, its inventory and conditions
  #     tags:
  #       - creature
  #     operationId: destroyCreature
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/monsters:
  #   get:
  #     summary: get monsters
  #     tags:
  #       - lists
  #     operationId: getMonsters
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the creature to delete
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       200:
  #         description: Success
  #         content:
  #           application/json:
  #             schema:
  #               type: array
  #               items:
  #                 type: number
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/damageTypes:
  #   get:
  #     summary: get damage types
  #     tags:
  #       - lists
  #     operationId: getDamageTypes
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the creature to delete
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       200:
  #         description: Success
  #         content:
  #           application/json:
  #             schema:
  #               type: array
  #               items:
  #                 type: number
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/conditions:
  #   get:
  #     summary: get conditions
  #     tags:
  #       - lists
  #     operationId: getConditions
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId of the creature to delete
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       200:
  #         description: Success
  #         content:
  #           application/json:
  #             schema:
  #               type: array
  #               items:
  #                 type: number
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  /games/{gameId}/characters:
    post:
      summary: create character
      tags:
        - character
        - game
      operationId: createCharacter
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CharacterRequest'
      responses:
        201:
          description: Success
          headers:
            Location:
              description: the uri to retrieve the character
              schema:
                type: string
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
    get:
      summary: get all characters for game
      tags:
        - character
        - game
      operationId: getGameCharacters
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: array
                items:
                  type: number
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  /characters/{characterId}:
    parameters:
      - name: characterId
        required: true
        in: path
        description: the characterId
        schema:
          type: string
    get:
      summary: retrieve character
      description: retrieves either the public character or detail, depending on the player making the request
      tags:
        - character
      operationId: getCharacter
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/Character'
                  - $ref: '#/components/schemas/CharacterDetail'
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
    patch:
      summary: update character partial
      tags:
        - character
      operationId: updateCharacter
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Character'
      responses:
        204:
          description: Success
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
    delete:
      summary: remove a character
      description: deletes the character and its inventory
      tags:
        - character
      operationId: deleteCharacter
      responses:
        204:
          description: Success
        404:
          description: resource not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
        500:
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/characters/{characterId}/resurrect:
  #   post:
  #     summary: resurrect character
  #     tags:
  #       - character
  #     operationId: resurrectCharacter
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId
  #       schema:
  #         type: number
  #     - name: characterId
  #       required: true
  #       in: path
  #       description: the characterId
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/items/{itemType}/{itemId}/take:
  #   post:
  #     summary: take item
  #     description: removes item from source inventory, and adds it to player/character inventory
  #     tags:
  #       - item
  #     operationId: takeItem
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId
  #       schema:
  #         type: number
  #     - name: itemType
  #       required: true
  #       in: path
  #       description: item type
  #       schema:
  #         $ref: '#/components/schemas/ItemType'
  #     - name: itemId
  #       required: true
  #       in: path
  #       description: itemId
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/items/{itemType}/{itemId}/equip:
  #   post:
  #     summary: equip item
  #     tags:
  #       - item
  #     operationId: equipItem
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId
  #       schema:
  #         type: number
  #     - name: itemType
  #       required: true
  #       in: path
  #       description: item type
  #       schema:
  #         $ref: '#/components/schemas/EquipableType'
  #     - name: itemId
  #       required: true
  #       in: path
  #       description: itemId
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/items/{itemType}/{itemId}/damage:
  #   post:
  #     summary: damage item
  #     description: marks item as damaged, or if the item was already damage, destroys it
  #     tags:
  #       - item
  #     operationId: damageItem
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId
  #       schema:
  #         type: number
  #     - name: itemType
  #       required: true
  #       in: path
  #       description: item type
  #       schema:
  #         $ref: '#/components/schemas/DamageableType'
  #     - name: itemId
  #       required: true
  #       in: path
  #       description: itemId
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       200:
  #         description: Success
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/DamageResponse'
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  # /games/{gameId}/items/{itemType}/{itemId}/repair:
  #   post:
  #     summary: repair item
  #     tags:
  #       - item
  #     operationId: repairItem
  #     parameters:
  #     - name: gameId
  #       required: true
  #       in: path
  #       description: the gameId
  #       schema:
  #         type: number
  #     - name: itemType
  #       required: true
  #       in: path
  #       description: item type
  #       schema:
  #         $ref: '#/components/schemas/DamageableType'
  #     - name: itemId
  #       required: true
  #       in: path
  #       description: itemId
  #       schema:
  #         type: number
  #     requestBody:
  #       required: true
  #       content:
  #         application/json:
  #           schema:
  #             $ref: '#/components/schemas/BasicTokenObject'
  #     responses:
  #       204:
  #         description: Success
  #       404:
  #         description: resource not found
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
  #       500:
  #         description: Internal Server Error
  #         content:
  #           application/json:
  #             schema:
  #               $ref: '#/components/schemas/FailResponse'
security:
  - bearerAuth: []
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    Player:
      description: Player object
      type: object
      additionalProperties: false

    PlayerDetail:
      description: Player details
      type: object
      additionalProperties: false
      allOf:
        - $ref: '#/components/schemas/Player'
    Character:
      description: Character object
      type: object
      additionalProperties: false
      properties:
        name:
          type: string
        maxHp:
          type: number
        baseResist:
          type: number
        inventorySize:
          type: number
    CharacterDetail:
      description: Character details
      type: object
      additionalProperties: false
      allOf:
        - $ref: '#/components/schemas/Character'
    RegisterRequest:
      description: Player request
      type: object
      additionalProperties: false
      required:
        - email
        - password
        - name
      properties:
        email:
          type: string
          format: email
        password:
          type: string
        name:
          type: string
    Game:
      description: Create game object
      type: object
      additionalProperties: false
      properties:
        name:
          type: string
        maxPlayers:
          type: number
    GameCharacter:
      description: Game and Character
      type: object
      additionalProperties: false
      properties:
        game:
          type: object
          allOf:
            - $ref: '#/components/schemas/Game'
        character:
          type: object
          allOf:
            - $ref: '#/components/schemas/Character'
    GameRequest:
      description: Create game requests
      type: object
      allOf:
        - $ref: '#/components/schemas/Game'
    BattleResponse:
      description: Battle object
      type: object
      additionalProperties: false
    MonsterRequest:
      description: Monster requests
      type: object
      additionalProperties: false
      properties:
        monsterId:
          type: number
    PetRequest:
      description: rename pet
      type: object
      additionalProperties: false
      properties:
        name:
          type: string
    CharacterRequest:
      description: Character requests
      type: object
      allOf:
        - $ref: '#/components/schemas/Character'
    BattleDamageRequest:
      description: Deal damage request
      type: object
      additionalProperties: false
      properties:
        creatures:
          type: array
          items:
            type: number
        characters:
          type: array
          items:
            type: number
        damageType:
          type: number
        damageAmt:
          type: number
    ItemType:
      description: Item type
      type: string
      enum: [weapon, armor, jewelry, spellbook]
    EquipableType:
      description: Item type
      type: string
      enum: [weapon, armor, jewelry]
    DamageableType:
      description: Item type
      type: string
      enum: [weapon, armor]
    DamageResponse:
      description: Item damaged
      type: object
      additionalProperties: false
      required:
        - result
      properties:
        result:
          type: string
          enum: [damaged, destroyed]
    FailResponse:
      description: request failed
      type: object
      additionalProperties: false
      required:
        - success
        - error
      properties:
        success:
          type: boolean
        error:
          type: string
    LoginResponse:
      description: login
      type: object
      additionalProperties: false
      required:
        - token
        - player
      properties:
        token:
          type: string
        player:
          type: string
